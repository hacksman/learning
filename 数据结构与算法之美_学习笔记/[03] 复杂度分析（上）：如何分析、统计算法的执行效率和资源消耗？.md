
数据结构和算法解决“快”和“省“的问题，而代码的执行效率就是非常重要的考核指标，即常说的时间、空间复杂度分析

### 为什么需要复杂度分析？

其实把代码跑一遍，就可以知道算法的执行效率，还有一个名字叫“事后统计法”，但这其中有非常大的局限性：
1. 测试结果依赖测试环境：比如i9处理器比i5处理器
2. 测试结果受数据规模的影响很大

### 大O复杂度表示法

```
def (n):
    sum = 0
    i = 1
    while i <= n:
        i += 1
        sum += i
    return sum
```

复杂度分析：其中第二、三行都运行了1次，而三四五行都运行了n次，那么最终就是(3n+2)\*u\_time，其中u\_time表示每行代码执行的单位时间，所以可以得到，代码的执行时间（用T(n)表示）与每行代码的执行次数成正比 

我们可以将这种规律总结为一个公式：

T(n) = O(f(n))

其中，T(n)表示代码执行的时间，n表示数据规模的大小，f(n)表示每次代码执行次数的总和，O表示代码的执行时间T(n)与f(n)表达式成正比

大O复杂度表示法并不具体代表代码的执行时间，而是表示代码执行时间随数据规模增长的变化趋势。也叫渐进时间复杂度，简称时间复杂度

### 时间复杂度分析

三个实用的方法进行时间复杂度分析：

#### 1. 只关注循环执行次数最多的一段代码
通常分析一段代码的复杂度，会忽略公式中的常量、低阶和系数，只记录最大阶的量级，所以只需要关注循环执行次数最多的代码即可

#### 2. 加法法则：总复杂度等于量级最大的那段代码的复杂度

#### 3. 乘法法则：嵌套代码的复杂度等于嵌套内外代码复杂度的乘积
```
def cal(n):
    total_sum = 0
    i = 1
    while i < n:
        i += 1
        total_sum = total_sum + n_cal(n)
    return total_sum

def n_cal(n):
    sum=0
    i = 1
    while i < n:
        i += 1
        sum += i
    return sum
```

从这段代码我们不难看出，当每一次cal调用至while循环时，时间复杂度是O(n)，n\_cal中的代码也将执行n此，它的时间复杂度也是是O(n)，所以整个时间复杂度就是O(n²)

复杂度量级归纳

多项式量级：
常量阶            O(1)
对数阶            O(log(n))
线性阶	       O(n)
线性对数阶     O(n\*log(n))
平方阶             O(n²)、O(n³)…

非多项式量级(NP)

指数阶            O(2^n)
阶乘阶            O(n!)

非多项式算法的执行时间会随着数据规模的增加而急剧增加，是非常低效的

#### 1. O(1)

__一般情况下，只要代码中不存在循环和递归语句，那么即使有成千上万的代码，其时间复杂度也是O(1)__

#### 2. O(log(n))、O(n\*log(n))

```
def cal_log(n):
    i = 1
    while i < n:
        i = i * 2
```

可以看出，每次循环都乘以2，即2¹、2²、2³… 是一个等比数列，最后求得2^x = n 时候x的值，其实这个x，也就是执行次数为log以2为底n的对数，其复杂度就是O(log(n))，而外面在包一层for循环，则复杂度就升级为O(n·log(n))

#### 3. O(m+n)、O(m\*n)
```
def cal_many(m, n):
    sum = 0
    i = 1
    while i < m:
        i += 1
        sum += i

    j = 1
    while j < n:
        j += 1
        sum += j

    return sum
```

从代码中我们可以看出，这里的两个参数m和n我们是无从得知他们两，谁的量级比较大，基于此，原来的加法原则就不能应用，因此复杂度由两个参数的对应复杂度相加决定，即这个例子是O(m+n)，而乘法法则则不受影响


### 空间复杂度

类似的，空间复杂度其实就是换一下对比的横轴，表示算法的存储空间与数据规模之间的增长关系

### 总结

常见的复杂度并不多，从低阶到高阶有：O(1)、O(log(n))、O(n)、O(n·log(n))、O(n²)

![][image-1]

[image-1]:	https://github.com/hacksman/learning/blob/master/picture/cal_log.jpeg