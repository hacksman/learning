
### 最好、最坏情况时间复杂度

```
def find(array, x):
    pos = -1
    for k, v in enumerate(array):
        if v == x:
            pos = v
    return pos
```

这个函数的作用是找到x在array中的位置，如果没有找到则返回-1，可以很显然的看出，这段代码的复杂度是O(n)，当然实际使用时，没有人会这么去写

下面我们做一下优化
```
def find(array, x):
    for k, v in enumerate(array):
        if v == x:
            return k
    return -1
```

这里优化后的情况是，如果我们已经找到了这个数据，则直接进行返回，这样就不用进行后面的遍历操作

这里，如果x恰好出现在数组第一个位置，那么很幸运，后面就不需要再进行遍历，此时的复杂度为O(1)；如果不幸出现在最后一个位置，甚至压根数据就不在数组里，那么就需要遍历一次整个数组，此时的复杂度为O(n)

顾名思义，我们自然可以理解，第一种情况，就是最好情况的时间复杂度，第二种情况就是最坏时间复杂度

### 平均时间复杂度

我们知道，其实最好情况和最坏情况都是极端情况，不一定会发生。因此可能不具备代表性，因此我们为了更准确的计算时间复杂度，引入了平均情况复杂度的概念，简称平均复杂度

还看这个例子，首先假定数组的长度为n，那么总共有x处出现在数组n个位置上和不出现在数组中，这n+1种情况。我们把每一种情况需要查找遍历的元素个数累加起来，再除以这n+1种情况，便可以得到需遍历元素个数的平均值，化解得到以下式子

![][image-1]

但这里有个问题，这里的n+1中情况并非是完全相等的。为了方便理解，假设数据出现在数组和不出现在数组中的概率都是1/2，另外要查找的数据，出现在0\~n-1这n个位置的概率也一样，为1/n，根据乘法定律，要查找的数据出现在数组中0\~n-1中任意位置的概率都是一样的，为1/2n，那么计算的平均时间复杂度就如下

![][image-2]

这个值就是概率论中所说的加权平均值，也叫期望值。所以平均时间复杂度全称应该是加权平均时间复杂度，或者期望时间复杂度


另外值得一提的是，虽然结果都是O(n)时间复杂度，没有数量级上的差异，但是在工程中，这种优化是有意义的

### 均摊时间复杂度

```
def insert(limit_num, val, array):
    sum = 0
    cursor = len(array) - 1
    if len(array) == limit_num:
        for i in array:
          sum += i
        array = [sum]
        cursor = 0
        return cursor, array

    array.append(val)
    cursor += 1
    return cursor, array
```

看代码我们便知，最理想的情况是数组中有空闲位置，我们只需要将数据插入到下表为cursor的位置即可，复杂度为O(1)，最坏的情况是数组中没有了多余的空间，我们便需要做一个遍历求和的动作，此时的算法复杂度为O(n)，那么平均的复杂度是多少呢？O(1)，我们来计算一下看看

假设数据是n，我们插入分为n种情况。每种复杂度都是O(1)，但是有一个例外，就是当数组中的数据已满时，此时的复杂度为O(n)，这n+1种情况发生的概率都是一样的，因此我们计算复杂度得到如下式子

![][image-3]

但其实我们观察一下特征就会发现，其实这种操作不需要进行复杂的加权计算，而只需要引入简单的摊还分析法。对应于这次场景就是，每一次O(n)的操作后，都会跟着n-1次的O(1)次的操作，均摊下来，这一组连续的操作的时间复杂度就是O(1)，这就是均摊复杂度

均摊的场景和特征的总结：
1. 对一个数据结构进行连续的操作中，大部分情况复杂度低，只有极个别情况下复杂度较高
2. 这组数据操作存在前后的连贯的时序关系
3. 一般能够应用均摊时间复杂度的场景，均摊时间复杂度就等于最好情况时间复杂度


[image-1]:	https://github.com/hacksman/learning/blob/master/picture/pingjun_1.jpg
[image-2]:	https://github.com/hacksman/learning/blob/master/picture/pingjun_2.jpg
[image-3]:	https://github.com/hacksman/learning/blob/master/picture/juntan.jpg